<!-- Template_1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6 -->
<!-- IHE PCC Functional Status Assessment (FSA), Version 3 January 2008 -->
<!-- IHE FSA Survey Observation -->


<pattern id='p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6-errors'>

 <rule context='*[cda:templateId/@root="1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6"]'> 

     <!-- Verify that the template id is used on the appropriate type of object --> 
   <assert test='self::cda:observation'> 
     Error: An FSA Survey Observation shall be a CDA Observation element. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6 
   </assert> 

   <!-- Verify that the parent templateId is also present. --> 
   <assert test='cda:templateId[@root="1.3.6.1.4.1.19376.1.5.3.1.4.13"]'> 
     Error: An FSA Survey Observation shall be an IHE Simple Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6 
   </assert>
 
   <assert test='cda:code'> 
     Error: An FSA Survey Observation shall contain a code element to identify the observation made. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6 
   </assert>
 
   <assert test='cda:value/@xsi:type'> 
     Error: An FSA Survey Observation shall contain a value element. It shall be of an appropriate data type for the survey observation made. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6 
   </assert> 
 
   <assert test='not(ancestor::cda:section[cda:templateId/@root="1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5" 
                     and cda:code/@code="46006-3"]) 
              or not(ancestor::cda:organizer[cda:templateId/@root="1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7"]) 
              or cda:value/@xsi:type="CO"'> 
     Error: If an FSA Survey Observation is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7), then it shall contain a value element with data type CO (Coded Ordinal). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert> 
 
   <assert test='not(ancestor::cda:section[cda:templateId/@root="1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5" 
                     and cda:code/@code="46006-3"])
              or not(self::cda:observation/cda:code/@code="45611-1") 
              or cda:value[@xsi:type="CO" and (not(@code) or @code="0" or @code="1")]'> 
     Error: If an FSA Survey Observation has a LOINC code of 45611-1 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3, then it shall contain a value element with data type CO (Coded Ordinal) and a value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(cda:methodCode)'>
     Error: An FSA Survey Observation shall not contain a methodCode element since method is not relevant to survey responses.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6
   </assert>

   <assert test='not(cda:targetSiteCode)'>
     Error: An FSA Survey Observation shall not contain a targetSiteCode element since target site is not relevant to survey responses.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6
   </assert>

 </rule>


 <!-- New contexts to evaluate code values -->

 <rule context='*[cda:value/@codeSystem="1.3.6.1.4.1.19376.6.257.755"]'>

   <assert test='cda:value[@code="0" or @code="1" or @code="2" or @code="3" or @code="4" or @code="8"]'>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.755) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,2,3,4,8}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

 </rule>

 <rule context='*[cda:value/@codeSystem="1.3.6.1.4.1.19376.6.257.768"]'>

   <assert test='cda:value[@code="0" or @code="1" or @code="2" or @code="8"]'>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.768) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,2,8}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

 </rule>

 <rule context='*[cda:value/@codeSystem="1.3.6.1.4.1.19376.6.257.860"]'>

   <assert test='cda:value[@code="0" or @code="1" or @code="2" or @code="3" or @code="4" or @code="8"]'>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.860) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,2,3,4,8}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

 </rule>

 <rule context='*[cda:value/@codeSystem="1.3.6.1.4.1.19376.6.257.876"]'>

   <assert test='cda:value[@code="0" or @code="1" or @code="2" or @code="3"]'>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.876) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,2,3}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

 </rule>

 <rule context='*[cda:value/@codeSystem="1.3.6.1.4.1.19376.6.257.889"]'>

   <assert test='cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.889) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,2}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

 </rule>

 <rule context='*[cda:value/@codeSystem="1.3.6.1.4.1.19376.6.257.898"]'>

   <assert test='cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.898) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,2}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

 </rule>

 <rule context='*[cda:value/@codeSystem="1.3.6.1.4.1.19376.6.257.117"]'>

   <assert test='cda:value[not(@code) or @code="0" or @code="1"]'>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.117) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,missing}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

 </rule>

 <rule context='*[cda:value/@codeSystem="1.3.6.1.4.1.19376.6.257.464"]'>

   <assert test='cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.464) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,2}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

 </rule>


 <!-- New context for checking values in certain FSA Survey Observations -->

 <rule context='*[cda:templateId/@root="1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6"
                  and ancestor::cda:section[cda:templateId/@root="1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5" 
                      and cda:code/@code="46006-3"] 
                  and ancestor::cda:organizer[cda:templateId/@root="1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7"]]'>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45888-1") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="3" or @code="4" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45888-1 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45590-7") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="3" or @code="4" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45590-7 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45592-3") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="3" or @code="4" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45592-3 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45594-9") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="3" or @code="4" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45594-9 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45596-4") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="3" or @code="4" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45596-4 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45598-0") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="3" or @code="4" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45598-0 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45600-4") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="3" or @code="4" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45600-4 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45602-0") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="3" or @code="4" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45602-0 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45604-6") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="3" or @code="4" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45604-6 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45606-1") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="3" or @code="4" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45606-1 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45589-9") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="3" or @code="4" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45589-9 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45591-5") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45591-5 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45593-1") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45593-1 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45595-6") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45595-6 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45597-2") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45597-2 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45599-8") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45599-8 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45601-2") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45601-2 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45603-8") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45603-8 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45605-3") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45605-3 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46007-1") 
              or not(self::cda:observation/cda:code/@code="45607-9") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45607-9 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46008-9") 
              or not(self::cda:observation/cda:code/@code="45608-7") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="3" or @code="4" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45608-7 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46008-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.860 (0 is Independent, 1 is Supervision, 2 is Transfer only assistance, 3 is Help with bathing, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46008-9") 
              or not(self::cda:observation/cda:code/@code="45609-5") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="8"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45609-5 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46008-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46009-7") 
              or not(self::cda:observation/cda:code/@code="45610-3") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="3"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45610-3 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46009-7, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.876 (0 is Maintained position, 1 is Unsteady, 2 is Partial physical support, and 3 is Physical help necessary). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46009-7") 
              or not(self::cda:observation/cda:code/@code="45523-8") 
              or cda:value[@code="0" or @code="1" or @code="2" or @code="3"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45523-8 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46009-7, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.876 (0 is Maintained position, 1 is Unsteady, 2 is Partial physical support, and 3 is Physical help necessary). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46010-5") 
              or not(self::cda:observation/cda:code/@code="45524-6") 
              or cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45524-6 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.889 (0 is No limitation, 1 is Limitation - one side, and 2 is Limitation - both sides). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46010-5") 
              or not(self::cda:observation/cda:code/@code="45526-1") 
              or cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45526-1 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.889 (0 is No limitation, 1 is Limitation - one side, and 2 is Limitation - both sides). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46010-5") 
              or not(self::cda:observation/cda:code/@code="45528-7") 
              or cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45528-7 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.889 (0 is No limitation, 1 is Limitation - one side, and 2 is Limitation - both sides). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46010-5") 
              or not(self::cda:observation/cda:code/@code="45530-3") 
              or cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45530-3 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.889 (0 is No limitation, 1 is Limitation - one side, and 2 is Limitation - both sides). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46010-5") 
              or not(self::cda:observation/cda:code/@code="45532-9") 
              or cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45532-9 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.889 (0 is No limitation, 1 is Limitation - one side, and 2 is Limitation - both sides). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46010-5") 
              or not(self::cda:observation/cda:code/@code="45534-5") 
              or cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45534-5 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.889 (0 is No limitation, 1 is Limitation - one side, and 2 is Limitation - both sides). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46010-5") 
              or not(self::cda:observation/cda:code/@code="45525-3") 
              or cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45525-3 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.898 (0 is No loss, 1 is Partial loss, and 2 is Full loss). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46010-5") 
              or not(self::cda:observation/cda:code/@code="45527-9") 
              or cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45527-9 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.898 (0 is No loss, 1 is Partial loss, and 2 is Full loss). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46010-5") 
              or not(self::cda:observation/cda:code/@code="45529-5") 
              or cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45529-5 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.898 (0 is No loss, 1 is Partial loss, and 2 is Full loss). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46010-5") 
              or not(self::cda:observation/cda:code/@code="45531-1") 
              or cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45531-1 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.898 (0 is No loss, 1 is Partial loss, and 2 is Full loss). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46010-5") 
              or not(self::cda:observation/cda:code/@code="45533-7") 
              or cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45533-7 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.898 (0 is No loss, 1 is Partial loss, and 2 is Full loss). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46010-5") 
              or not(self::cda:observation/cda:code/@code="45535-2") 
              or cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45535-2 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.898 (0 is No loss, 1 is Partial loss, and 2 is Full loss). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46011-3") 
              or not(self::cda:observation/cda:code/@code="45536-0") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45536-0 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46011-3, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46011-3") 
              or not(self::cda:observation/cda:code/@code="45537-8") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45537-8 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46011-3, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46011-3") 
              or not(self::cda:observation/cda:code/@code="45538-6") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45538-6 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46011-3, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46011-3") 
              or not(self::cda:observation/cda:code/@code="45539-4") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45539-4 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46011-3, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46011-3") 
              or not(self::cda:observation/cda:code/@code="455340-2") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 455340-2 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46011-3, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46012-1") 
              or not(self::cda:observation/cda:code/@code="45541-0") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45541-0 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46012-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46012-1") 
              or not(self::cda:observation/cda:code/@code="45542-8") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45542-8 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46012-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46012-1") 
              or not(self::cda:observation/cda:code/@code="45543-6") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45543-6 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46012-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46012-1") 
              or not(self::cda:observation/cda:code/@code="45544-4") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45544-4 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46012-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46012-1") 
              or not(self::cda:observation/cda:code/@code="45545-1") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45545-1 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46012-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46012-1") 
              or not(self::cda:observation/cda:code/@code="45546-9") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45546-9 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46012-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46013-9") 
              or not(self::cda:observation/cda:code/@code="45612-9") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45612-9 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46013-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46013-9") 
              or not(self::cda:observation/cda:code/@code="45613-7") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45613-7 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46013-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46013-9") 
              or not(self::cda:observation/cda:code/@code="45614-5") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45614-5 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46013-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46013-9") 
              or not(self::cda:observation/cda:code/@code="45615-2") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45615-2 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46013-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46013-9") 
              or not(self::cda:observation/cda:code/@code="45616-0") 
              or cda:value[not(@code) or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45616-0 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46013-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

   <assert test='not(ancestor::cda:organizer/cda:code/@code="46013-9") 
              or not(self::cda:observation/cda:code/@code="45617-8") 
              or cda:value[@code="0" or @code="1" or @code="2"]'>
     Error: If an FSA Survey Observation has a LOINC code of 45617-8 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46013-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.464 (0 is No change, 1 is Improved, and 2 is Deteriorated). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </assert>

 </rule>
 
</pattern>



<!-- Pattern for Warnings -->

<pattern id='p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6-warning'>

 <rule context='*[cda:templateId/@root="1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6"]'> 

   <assert test='not(cda:effectiveTime)'>
     Warning: An FSA Survey Observation should contain an effectiveTime element, unless the effective time has already been recorded in a parent Organizer. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6
   </assert>

 </rule>

</pattern>



<!-- Pattern for Notes -->

<pattern id='p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6-note'>

 <rule context='*[cda:templateId/@root="1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6"]'> 

   <assert test='cda:interpretationCode'> 
     Note: An FSA Survey Observation may contain an interpretationCode element to indicate an interpretation of the observation value.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6 
   </assert>

 </rule>

</pattern>

